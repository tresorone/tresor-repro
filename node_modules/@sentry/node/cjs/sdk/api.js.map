{"version":3,"file":"api.js","sources":["../../../src/sdk/api.ts"],"sourcesContent":["// PUBLIC APIS\n\nimport type { StackParser } from '@sentry/types';\nimport { GLOBAL_OBJ, createStackParser, nodeStackLineParser } from '@sentry/utils';\nimport { createGetModuleFromFilename } from '../utils/module';\n\n/**\n * Returns a release dynamically from environment variables.\n */\nexport function getSentryRelease(fallback?: string): string | undefined {\n  // Always read first as Sentry takes this as precedence\n  if (process.env.SENTRY_RELEASE) {\n    return process.env.SENTRY_RELEASE;\n  }\n\n  // This supports the variable that sentry-webpack-plugin injects\n  if (GLOBAL_OBJ.SENTRY_RELEASE && GLOBAL_OBJ.SENTRY_RELEASE.id) {\n    return GLOBAL_OBJ.SENTRY_RELEASE.id;\n  }\n\n  return (\n    // GitHub Actions - https://help.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables#default-environment-variables\n    process.env.GITHUB_SHA ||\n    // Netlify - https://docs.netlify.com/configure-builds/environment-variables/#build-metadata\n    process.env.COMMIT_REF ||\n    // Vercel - https://vercel.com/docs/v2/build-step#system-environment-variables\n    process.env.VERCEL_GIT_COMMIT_SHA ||\n    process.env.VERCEL_GITHUB_COMMIT_SHA ||\n    process.env.VERCEL_GITLAB_COMMIT_SHA ||\n    process.env.VERCEL_BITBUCKET_COMMIT_SHA ||\n    // Zeit (now known as Vercel)\n    process.env.ZEIT_GITHUB_COMMIT_SHA ||\n    process.env.ZEIT_GITLAB_COMMIT_SHA ||\n    process.env.ZEIT_BITBUCKET_COMMIT_SHA ||\n    // Cloudflare Pages - https://developers.cloudflare.com/pages/platform/build-configuration/#environment-variables\n    process.env.CF_PAGES_COMMIT_SHA ||\n    fallback\n  );\n}\n\n/** Node.js stack parser */\nexport const defaultStackParser: StackParser = createStackParser(nodeStackLineParser(createGetModuleFromFilename()));\n"],"names":["GLOBAL_OBJ","createStackParser","nodeStackLineParser","createGetModuleFromFilename"],"mappings":";;;;;AAMA;AACA;AACA;AACO,SAAS,gBAAgB,CAAC,QAAQ,EAA+B;AACxE;AACA,EAAE,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE;AAClC,IAAI,OAAO,OAAO,CAAC,GAAG,CAAC,cAAc,CAAA;AACrC,GAAE;AACF;AACA;AACA,EAAE,IAAIA,gBAAU,CAAC,cAAA,IAAkBA,gBAAU,CAAC,cAAc,CAAC,EAAE,EAAE;AACjE,IAAI,OAAOA,gBAAU,CAAC,cAAc,CAAC,EAAE,CAAA;AACvC,GAAE;AACF;AACA,EAAE;AACF;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,UAAW;AAC3B;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,UAAW;AAC3B;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,qBAAsB;AACtC,IAAI,OAAO,CAAC,GAAG,CAAC,wBAAyB;AACzC,IAAI,OAAO,CAAC,GAAG,CAAC,wBAAyB;AACzC,IAAI,OAAO,CAAC,GAAG,CAAC,2BAA4B;AAC5C;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,sBAAuB;AACvC,IAAI,OAAO,CAAC,GAAG,CAAC,sBAAuB;AACvC,IAAI,OAAO,CAAC,GAAG,CAAC,yBAA0B;AAC1C;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,mBAAoB;AACpC,IAAI,QAAA;AACJ,IAAG;AACH,CAAA;AACA;AACA;AACa,MAAA,kBAAkB,GAAgBC,uBAAiB,CAACC,yBAAmB,CAACC,oCAA2B,EAAE,CAAC;;;;;"}